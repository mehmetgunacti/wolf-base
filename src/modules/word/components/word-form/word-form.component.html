<header>

	<div card_title>{{ word() ? 'Edit' : 'Add' }} Word</div>

</header>
<main>

	<form>

		<!-- ID -->
		<div *ngIf="word()?.id">
			<w-input [control]="form.id" name="ID" [readonly]="true"/>
		</div>

		<!-- NAME -->
		<div>
			<w-input [control]="form.name" name="Term"/>
		</div>

		<!-- PRONUNCIATION -->
		<div>
			<w-input [control]="form.pronunciation" name="Pronunciation"/>
		</div>

		<div>
			<button type="button" (click)="form.addContext()">Add Context</button>
		</div>

		@for (context of form.contexts(); track context.objectId) {

			<!-- CONTEXTS -->
			<div context>

				<w-textarea [control]="context.fc" [name]="'Context #' + ($index + 1)" [rows]="3"/>
				<button
					type="button"
					class="icon-only small"
					[title]="'Remove Sample #' + ($index + 1)"
					(click)="form.removeContext(context.objectId)">
					<span class="material-symbols-outlined warn">do_not_disturb_on</span>
				</button>

			</div>

		}

		@for (definition of form.definitions(); track definition.objectId) {

			<fieldset>
				<legend>Definition #{{$index + 1}}</legend>

				@if($index > 0) {

					<button
						type="button"
						class="icon-only small"
						(click)="form.removeDefinition(definition.objectId)">
						<span class="material-symbols-outlined warn">do_not_disturb_on</span> Remove Definition #{{ $index + 1 }}
					</button>

				}

				<div definition>

					<!-- TYPE -->
					<div>
						<w-select [control]="definition.type" name="Type" [nodes]="DEFINITION_TYPES"/>
					</div>

					@for (lang of definition.languages(); track lang.objectId) {

						<!-- LANGUAGES -->
						<div language>

							<!-- LANGUAGE -->
							<div>
								<w-select [control]="lang.language" name="Language" [nodes]="DEFINITION_LANGUAGES"/>
							</div>

							<!-- NAME -->
							<div>
								<w-input [control]="lang.name" name="Meaning"/>
							</div>

							@if($index < 1) {

								<button
									type="button"
									class="icon-only small"
									title="Add Language"
									(click)="definition.addLanguage()">
									<span class="material-symbols-outlined success">add_circle</span>
								</button>

							} @else {

								<button
									type="button"
									class="icon-only small"
									[title]="'Remove Language #' + ($index + 1)"
									(click)="definition.removeLanguage(lang.objectId)">
									<span class="material-symbols-outlined warn">do_not_disturb_on</span>
								</button>

							}

						</div>

					}

					@for (sample of definition.samples(); track sample.objectId) {

						<!-- SAMPLES -->
						<div sample>

							<w-textarea [control]="sample.fc" [name]="'Sample #' + ($index + 1)" [rows]="3"/>
							@if($index < 1) {

								<button
									type="button"
									class="icon-only small"
									title="Add Sample"
									(click)="definition.addSample()">
									<span class="material-symbols-outlined success">add_circle</span>
								</button>

							} @else {

								<button
									type="button"
									class="icon-only small"
									[title]="'Remove Sample #' + ($index + 1)"
									(click)="definition.removeSample(sample.objectId)">
									<span class="material-symbols-outlined warn">do_not_disturb_on</span>
								</button>

							}

						</div>

					}

				</div>
			</fieldset>

		}
		<div>
			<button type="button" (click)="form.addDefinition()">Add Definition</button>
		</div>

	</form>

</main>
<footer>

	<button type="button" (click)="onSave()"><span class="material-symbols-outlined">save</span> Save</button>

</footer>
