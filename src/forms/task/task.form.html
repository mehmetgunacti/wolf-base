<form [formGroup]="form.fg" class="flex flex-col gap-4">

	<!-- PROJECT ID -->
	@let project = form.project.valueChanges | async;
	@if (project) {

		<div>
			<small>{{ project.id }}</small>
			{{ project.name }}
		</div>

	}

	<!-- ID -->
	@if (task()?.id) {

		<w-input formControlName="id" label="ID" [readonly]="true"/>

	}

	<!-- NAME -->
	<w-input formControlName="name" label="Name"/>

	<!-- PROJECT -->
	<w-input formControlName="project" label="Project"/>

	<!-- NAME -->
	<w-input formControlName="name" label="Name"/>

	<!-- DESCRIPTION -->
	<w-textarea formControlName="description" label="Description" [rows]="3"/>

	<!-- TAGS -->
	<div task_row>
		<w-input-tag
			formControlName="tags"
			label="Tags"
			class="input-element"
			(tagInput)="onTagInput($event)"
			[suggestions]="tagSuggestions()"/>
		<button type="button" class="link" [title]="'Toggle \''+TAG_OPTIONAL+'\''" (click)="onToggleOptional()"><span class="material-symbols-outlined" [class.filled]="((form.tags.valueChanges | async) ?? []).includes(TAG_OPTIONAL)">preliminary</span></button>
	</div>

	<!-- task_status_row -->
	<div>

		<!-- STATUS -->
		<w-select formControlName="status" label="Status" [nodes]="TASK_STATE"/>

		<!-- PRIORITY -->
		<w-select formControlName="priority" label="Priority" [nodes]="TASK_PRIORITIES"/>

		<!-- CATEGORY -->
		<w-select formControlName="category" label="Category" [nodes]="TASK_CATEGORIES"/>

	</div>

	<!-- task_date_row -->
	<div>

		<!-- START -->
		<w-input formControlName="start" label="Start" type="date"/>

		<!-- END -->
		<w-input formControlName="end" label="End" type="date"/>

	</div>

</form>

<!-- form-element-buttons -->
<w-portal outletName="dialog-footer-outlet" [delayRemoval]="2000">

	<div class="flex">

		<button type="button" [disabled]="this.form.fg.pristine || this.form.fg.invalid" (click)="onSave()" class="ml-auto btn">
			<svg wGlyph="save"></svg> Save
		</button>

	</div>

</w-portal>
