<div buttons>

	<button
		class="icon-only"
		[cdkMenuTriggerFor]="format_menu"
		title="Format Options"
		tabindex="0">
		<span class="material-symbols-outlined">style</span>
	</button>
	<ng-template #format_menu>

		<div format_menu class="card darker" cdkMenu>

			<div>

				<!-- BOLD BUTTON -->
				<button
					class="icon-only"
					(click)="addBold()"
					title="Bold"
					tabindex="0"
					cdkMenuItem>
					<span class="material-symbols-outlined">format_bold</span>
				</button>

				<!-- ITALIC BUTTON -->
				<button
					class="icon-only"
					(click)="addItalic()"
					title="Italic"
					tabindex="0"
					cdkMenuItem>
					<span class="material-symbols-outlined">format_italic</span>
				</button>

				<!-- STRIKETHROUGH BUTTON -->
				<button
					class="icon-only"
					(click)="addStrikethrough()"
					title="Strikethrough"
					tabindex="0"
					cdkMenuItem>
					<span class="material-symbols-outlined">format_strikethrough</span>
				</button>

			</div>

			<div>

				<!-- ALIGN CENTER BUTTON -->
				<button
					class="icon-only"
					(click)="addAlignCenter()"
					title="Align Center"
					tabindex="0"
					cdkMenuItem>
					<span class="material-symbols-outlined">format_align_center</span>
				</button>

				<!-- ALIGN RIGHT BUTTON -->
				<button
					class="icon-only"
					(click)="addAlignRight()"
					title="Align Right"
					tabindex="0"
					cdkMenuItem>
					<span class="material-symbols-outlined">format_align_right</span>
				</button>

				<!-- ALIGN JUSTIFY BUTTON -->
				<button
					class="icon-only"
					(click)="addAlignJustify()"
					title="Align Justify"
					tabindex="0"
					cdkMenuItem>
					<span class="material-symbols-outlined">format_align_justify</span>
				</button>

			</div>

		</div>

	</ng-template>

	<!-- DIVIDER -->
	<div class="v-divider"></div>

	<!-- ADD CHECKBOX (TASK) BUTTON -->
	<button
		class="icon-only"
		(click)="addEmptyTask()"
		title="Add Empty Task"
		tabindex="0">
		<span class="material-symbols-outlined">check_box</span>
	</button>

	<!-- ADD TABLE BUTTON -->
	<button
		class="icon-only"
		[cdkMenuTriggerFor]="table_menu"
		title="Add Table"
		tabindex="0">
		<span class="material-symbols-outlined">table</span>
	</button>
	<ng-template #table_menu>

		<w-selector-table
			[rows]="6"
			[cols]="7"
			(result)="addTable($event)"
			cdkMenu/>

	</ng-template>

	<!-- IMAGE FROM CLIPBOARD BUTTON -->
	<button
		#btnImage
		class="icon-only"
		(click)="addImage(btnImage)"
		title="Image from Clipboard"
		tabindex="0"
		[class.shake]="btnImageShake()">
		<span class="material-symbols-outlined">image</span>
	</button>

	<!-- PREVIEW BUTTON -->
	<button
		class="icon-only"
		(click)="onPreviewOpen()"
		tabindex="0">
		<span class="material-symbols-outlined">live_tv</span>
		<span>Preview</span>
		<!-- <span class="material-symbols-outlined">{{ isPreview() ? 'edit_note' : 'live_tv' }}</span>
		<span>{{ isPreview() ? 'Editor' : 'Preview' }}</span> -->
	</button>

</div>

<div area>

	<!-- @if (isPreview()) {

		<div [innerHTML]="control.value | markdownToHtml | sanitizeHtml"></div>

	} @else { -->

		<textarea
			#editor
			[rows]="rows"
			[cols]="cols"
			[ngClass]="{ 'ng-invalid ng-dirty': control.invalid && control.dirty }"
			[formControl]="control"
			placeholder=""
			[readonly]="readonly"
			(input)="onInput($event)"></textarea>
		<label [class.up]="hasValue$ | async">{{name}}</label>
		<label class="up right">{{ contentSizeString() }}</label>

	<!-- } -->


</div>

<ng-template #previewTemplate>

	<w-card>
		<ng-container card-title>Preview</ng-container>
		<ng-container card-buttons>

			<button
				class="icon-only rounded"
				(click)="onPreviewClose()">
				<span class="material-symbols-outlined">close</span>
			</button>

		</ng-container>

		<div class="card" [innerHTML]="content() | markdownToHtml | sanitizeHtml"></div>

	</w-card>
</ng-template>
