@use 'sass:math';
@import 'variables';
@import 'helper';
@import 'components';

$_switch_component_height	: $widget-height;
$_switch-handle-width		: 0.9 * $_switch_component_height;
$_switch-handle-height		: 0.4 * $_switch_component_height;
$_switch-knob-height		: 0.6 * $_switch_component_height;

$_switch-knob-color		: --_switch-knob-color;
$_switch-bg-color		: --_switch-bg-color;
$_switch-border-color	: --_switch-border-colors;
$_component-bg-color	: --_component-bg-color;

:host {

	#{$_switch-knob-color}	: fn-var($col-primary);
	#{$_switch-bg-color}	: fn-var($col-form-element-bg);
	#{$_component-bg-color}	: fn-var($col-transparent);

	@include mx-d-inline-flex;
	gap				: $gap-sm;
	min-height		: $_switch_component_height;
	border-radius	: $border-radius-sm;

	cursor			: pointer;
	background-color: fn-var($_component-bg-color);
	@include mx-input-element-border($border-color: $col-transparent);
	@include mx-transition-short(background-color border-color);

	&:focus-visible {

		@include mx-outline;

	}

	&:hover {

		#{$_component-bg-color}	: fn-var($col-form-element-bg);
		#{$_switch-bg-color}	: fn-var($col-form-element-border);

	}

	& > [switch_label] {

		flex			: 1;
		place-self		: center start;
		padding-left	: $gap-sm;

	}

	& > [switch_handle] {

		position		: relative;
		@include mx-d-block;

		margin-inline	: $gap-lg;
		width			: $_switch-handle-width;

		&::before {

			content		: "";
			position	: absolute;
			display		: block;
			top			: math.div(($_switch_component_height - $_switch-handle-height), 2);
			left		: 0;

			width		: $_switch-handle-width;
			height		: $_switch-handle-height;

			border-radius		: $border-radius-round;
			background-color	: fn-var($_switch-bg-color);

			@include mx-transition(background-color);

		}

		&::after {

			content				: "";
			position			: absolute;
			display				: block;
			top					: math.div(($_switch_component_height - $_switch-knob-height), 2);
			left				: - math.div($_switch-knob-height, 3);
			background-color	: fn-var($_switch-knob-color);
			width				: $_switch-knob-height;
			height				: $_switch-knob-height;
			border-radius		: $border-radius-round;

			@include mx-transition-short(left);

		}

		&[data-on="true"]::before {

			#{$_switch-bg-color}	: fn-color-lighten($_switch-knob-color, 20%);

		}

		&[data-on="true"]::after {

			left	: $_switch-handle-width - 2 * math.div($_switch-knob-height, 3);

		}

	}

	&.success {

		#{$_switch-knob-color}	: fn-var($col-success);

	}

	&.info {

		#{$_switch-knob-color}	: fn-var($col-info);

	}

	&.warn {

		#{$_switch-knob-color}	: fn-var($col-warn);

	}

	&.error {

		#{$_switch-knob-color}	: fn-var($col-error);

	}

}
