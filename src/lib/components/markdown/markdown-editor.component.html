@let btnClass = 'btn btn-ghost px-1 rounded-sm h-button-height-2xs text-base md:h-button-height-sm md:px-2 md:text-lg lg:text-xl';

<div cdkMenuBar class="flex flex-wrap items-center gap-[2px] p-2 bg-form-element-border rounded-t-lg">

	<!-- SAVE BUTTON -->
	<button
		cdkMenuItem
		[class]="btnClass"
		(click)="onSave()"
		title="Save Changes"
		[disabled]="!dirty()"
		[cdkMenuItemDisabled]="!dirty()">
		<svg wGlyph="save"></svg>
	</button>

	<!-- DIVIDER -->
	<div class="border-r border-r-ghost-hover h-button-height-2xs md:h-button-height-xs"></div>

	<!-- PREVIEW BUTTON -->
	<button
		cdkMenuItem
		[class]="btnClass"
		title="Open Preview"
		(click)="onPreviewOpen()">
		<svg wGlyph="live_tv"></svg>
	</button>

	<!-- RECOVER BUTTON -->
	<button
		cdkMenuItem
		[class]="btnClass"
		title="Recover"
		[class.shake]="btnOpenRecovery()"
		(click)="onRecoverOpen()">
		<svg wGlyph="recover"></svg>
	</button>

	<!-- DIVIDER -->
	<div class="border-r border-r-ghost-hover h-button-height-2xs md:h-button-height-xs"></div>

	<!-- UNDO BUTTON -->
	<button
		cdkMenuItem
		[class]="btnClass"
		(click)="onUndo()"
		title="Undo"
		[disabled]="!undoCache.canUndo()"
		[cdkMenuItemDisabled]="!undoCache.canUndo()">
		<svg wGlyph="undo"></svg>
	</button>

	<!-- REDO BUTTON -->
	<button
		cdkMenuItem
		[class]="btnClass"
		(click)="onRedo()"
		title="Redo"
		[disabled]="!undoCache.canRedo()"
		[cdkMenuItemDisabled]="!undoCache.canRedo()">
		<svg wGlyph="redo"></svg>
	</button>

	<!-- DIVIDER -->
	<div class="border-r border-r-ghost-hover h-button-height-2xs md:h-button-height-xs"></div>

	<!-- HEADING BUTTON -->
	<button
		[class]="btnClass"
		[cdkMenuTriggerFor]="format_heading"
		title="Heading"
		cdkMenuItem>
		<svg wGlyph="format_h1"></svg>
	</button>

	<!-- DIVIDER -->
	<div class="border-r border-r-ghost-hover h-button-height-2xs md:h-button-height-xs"></div>

	<!-- BOLD BUTTON -->
	<button
		[class]="btnClass"
		(click)="updateEditor(actions.addBold(editor))"
		title="Bold"
		cdkMenuItem>
		<svg wGlyph="format_bold"></svg>
	</button>

	<!-- ITALIC BUTTON -->
	<button
		[class]="btnClass"
		(click)="updateEditor(actions.addItalic(editor))"
		title="Italic"
		cdkMenuItem>
		<svg wGlyph="format_italic"></svg>
	</button>

	<!-- STRIKETHROUGH BUTTON -->
	<button
		[class]="btnClass"
		(click)="updateEditor(actions.addStrikethrough(editor))"
		title="Strikethrough"
		cdkMenuItem>
		<svg wGlyph="format_strikethrough"></svg>
	</button>

	<!-- HIGHLIGHT BUTTON -->
	<button
		[class]="btnClass"
		(click)="updateEditor(actions.addHighlight(editor))"
		title="Highlight"
		cdkMenuItem>
		<svg wGlyph="format_ink_highlighter"></svg>
	</button>

	<!-- DIVIDER -->
	<div class="border-r border-r-ghost-hover h-button-height-2xs md:h-button-height-xs"></div>

	<!-- ALIGN CENTER BUTTON -->
	<button
		[class]="btnClass"
		(click)="updateEditor(actions.addAlignCenter(editor))"
		title="Align Center"
		cdkMenuItem>
		<svg wGlyph="format_align_center"></svg>
	</button>

	<!-- ALIGN RIGHT BUTTON -->
	<button
		[class]="btnClass"
		(click)="updateEditor(actions.addAlignRight(editor))"
		title="Align Right"
		cdkMenuItem>
		<svg wGlyph="format_align_right"></svg>
	</button>

	<!-- ALIGN JUSTIFY BUTTON -->
	<button
		[class]="btnClass"
		(click)="updateEditor(actions.addAlignJustify(editor))"
		title="Align Justify"
		cdkMenuItem>
		<svg wGlyph="format_align_justify"></svg>
	</button>

	<!-- DIVIDER -->
	<div class="border-r border-r-ghost-hover h-button-height-2xs md:h-button-height-xs"></div>

	<!-- SUB BUTTON -->
	<button
		[class]="btnClass"
		(click)="updateEditor(actions.addSub(editor))"
		title="Subscript (H2O)"
		cdkMenuItem>
		<svg wGlyph="subscript"></svg>
	</button>

	<!-- SUP BUTTON -->
	<button
		[class]="btnClass"
		(click)="updateEditor(actions.addSup(editor))"
		title="Superscript (E=mc2)"
		cdkMenuItem>
		<svg wGlyph="superscript"></svg>
	</button>

	<!-- DIVIDER -->
	<div class="border-r border-r-ghost-hover h-button-height-2xs md:h-button-height-xs"></div>

	<!-- BULLETED LIST BUTTON -->
	<button
		[class]="btnClass"
		(click)="updateEditor(actions.addListBulleted(editor))"
		title="Bulleted List"
		cdkMenuItem>
		<svg wGlyph="format_list_bulleted"></svg>
	</button>

	<!-- LIST NUMBERED BUTTON -->
	<button
		[class]="btnClass"
		(click)="updateEditor(actions.addListNumbered(editor))"
		title="Numbered List"
		cdkMenuItem>
		<svg wGlyph="format_list_numbered"></svg>
	</button>

	<!-- DIVIDER -->
	<div class="border-r border-r-ghost-hover h-button-height-2xs md:h-button-height-xs"></div>

	<!-- DECREASE INDENT BUTTON -->
	<button
		[class]="btnClass"
		(click)="updateEditor(actions.decreaseIndent(editor))"
		title="Decrease Indent"
		cdkMenuItem>
		<svg wGlyph="format_indent_decrease"></svg>
	</button>

	<!-- INCREASE INDENT BUTTON -->
	<button
		[class]="btnClass"
		(click)="updateEditor(actions.increaseIndent(editor))"
		title="Increase Indent"
		cdkMenuItem>
		<svg wGlyph="format_indent_increase"></svg>
	</button>

	<!-- DIVIDER -->
	<div class="border-r border-r-ghost-hover h-button-height-2xs md:h-button-height-xs"></div>

	<!-- ADD CHECKBOX (TASK) BUTTON -->
	<button
		[class]="btnClass"
		(click)="updateEditor(actions.addEmptyTask(editor))"
		title="Task"
		cdkMenuItem>
		<svg wGlyph="check_box"></svg>
	</button>

	<!-- ADD TABLE BUTTON -->
	<button
		[class]="btnClass"
		[cdkMenuTriggerFor]="table_menu"
		title="Table"
		cdkMenuItem>
		<svg wGlyph="table"></svg>
	</button>

	<!-- CODE BUTTON -->
	<button
		[class]="btnClass"
		[cdkMenuTriggerFor]="code_menu"
		title="Code"
		cdkMenuItem>
		<svg wGlyph="code_blocks"></svg>
	</button>

	<!-- ADD BLOCKQUOTE BUTTON -->
	<button
		[class]="btnClass"
		[cdkMenuTriggerFor]="blockquote_menu"
		title="Blockquote"
		cdkMenuItem>
		<svg wGlyph="format_quote"></svg>
	</button>

	<!-- DIVIDER -->
	<div class="border-r border-r-ghost-hover h-button-height-2xs md:h-button-height-xs"></div>

	<!-- IMAGE FROM CLIPBOARD BUTTON -->
	<button
		#btnImage
		[class]="btnClass"
		(click)="addImage(btnImage)"
		title="Image from Clipboard"
		[class.shake]="btnImageShake()"
		cdkMenuItem>
		<svg wGlyph="image"></svg>
	</button>

	<!-- TOC BUTTON -->
	<button
		[class]="btnClass"
		(click)="updateEditor(actions.addToc(editor))"
		title="Table of Contents"
		cdkMenuItem>
		<svg wGlyph="toc"></svg>
	</button>

</div>

@if (showPreview()) {

	<w-modal (close)="onPreviewClose()">
		<div class="h-full">

			<header class="flex items-center p-2">
				<div class="ml-2 font-bold text-2xl text-content">Preview</div>
				<div class="ml-auto">

					<button
						class="btn btn-glyph"
						(click)="onPreviewClose()">
						<svg wGlyph="close"></svg>
					</button>

				</div>
			</header>
			<!-- CONTENT WRAPPER - SCROLLBAR -->
			<section class="h-full overflow-y-auto scrollbar scrollbar-gutter-stable">
				<!-- CONTENT -->
				<div class="p-3">

					<w-markdown-viewer [markdown]="undoCache.props().content"/>

				</div>
			</section>

		</div>
	</w-modal>

}

@if (showRecover()) {

	<w-modal (close)="onRecoverClose()">
		<div class="h-full" cdkMenu>

			<header class="flex items-center p-2">
				<div class="ml-2 font-bold text-2xl text-content">Preview</div>
				<div class="ml-auto">

					<button
						cdkMenuItem
						class="btn btn-glyph"
						[disabled]="!recoveryManager.hasPrev()"
						[cdkMenuItemDisabled]="!recoveryManager.hasPrev()"
						(click)="recoveryManager.previous()">
						<svg wGlyph="chevron_left"></svg>
					</button>
					<button
						cdkMenuItem
						class="btn btn-glyph"
						[disabled]="!recoveryManager.hasNext()"
						[cdkMenuItemDisabled]="!recoveryManager.hasNext()"
						(click)="recoveryManager.next()">
						<svg wGlyph="chevron_right"></svg>
					</button>
					<button
						cdkMenuItem
						class="btn btn-ghost"
						(click)="onRecoverReplace()">
						<svg wGlyph="published_with_changes"></svg>
						<span>Replace</span>
					</button>
					<button
						cdkMenuItem
						class="btn btn-glyph"
						(click)="onRecoverClose()">
						<svg wGlyph="close"></svg>
					</button>

				</div>
			</header>
			<!-- CONTENT WRAPPER - SCROLLBAR -->
			<section class="h-full overflow-y-auto scrollbar scrollbar-gutter-stable">
				<!-- CONTENT -->
				<div class="p-3 text-content">

					@if(recoveryManager.recoverableContent(); as lsEntry) {

						<div class="text-base-color-secondary italic">{{ lsEntry.time.toUTCString() | timePast:true:'precise' }}</div>
						<w-markdown-viewer [markdown]="lsEntry.content"/>

					}

				</div>
			</section>

		</div>
	</w-modal>

}

<ng-template #table_menu>

	<div class="gap-2 grid py-2 comp size-40" cdkMenu>

		<w-selector-table
			[rows]="6"
			[cols]="7"
			(result)="updateEditor(actions.addTable(editor, $event))"/>

	</div>

</ng-template>

<ng-template #format_heading>

	<div class="gap-2 grid py-2 w-56 h-48 comp" cdkMenu>

		<div class="flex flex-col gap-2 p-2 overflow-y-auto prose scrollbar scrollbar-gutter-stable">

			<!-- H1 BUTTON -->
			<button
				(click)="updateEditor(actions.addHeading(editor, '#'))"
				title="Align Center"
				cdkMenuItem
				class="rounded-sm focus-visible:ring-4 focus-visible:outline-hidden hover:bg-ghost-hover focus-visible:ring-outline">
				<h1 class="my-2 text-content">Heading 1</h1>
			</button>

			<!-- H2 BUTTON -->
			<button
				(click)="updateEditor(actions.addHeading(editor, '##'))"
				title="Heading 2"
				cdkMenuItem
				class="rounded-sm focus-visible:ring-4 focus-visible:outline-hidden hover:bg-ghost-hover focus-visible:ring-outline">
				<h2 class="my-2 text-content">Heading 2</h2>
			</button>

			<!-- H3 BUTTON -->
			<button
				(click)="updateEditor(actions.addHeading(editor, '###'))"
				title="Heading 3"
				cdkMenuItem
				class="rounded-sm focus-visible:ring-4 focus-visible:outline-hidden hover:bg-ghost-hover focus-visible:ring-outline">
				<h3 class="my-2 text-content">Heading 3</h3>
			</button>

			<!-- H4 BUTTON -->
			<button
				(click)="updateEditor(actions.addHeading(editor, '####'))"
				title="Heading 4"
				cdkMenuItem
				class="rounded-sm focus-visible:ring-4 focus-visible:outline-hidden hover:bg-ghost-hover focus-visible:ring-outline">
				<h4 class="my-2 text-content">Heading 4</h4>
			</button>

			<!-- H5 BUTTON -->
			<button
				(click)="updateEditor(actions.addHeading(editor, '#####'))"
				title="Heading 5"
				cdkMenuItem
				class="rounded-sm focus-visible:ring-4 focus-visible:outline-hidden hover:bg-ghost-hover focus-visible:ring-outline">
				<h5 class="my-2 text-content">Heading 5</h5>
			</button>

			<!-- H6 BUTTON -->
			<button
				(click)="updateEditor(actions.addHeading(editor, '######'))"
				title="Heading 6"
				cdkMenuItem
				class="rounded-sm focus-visible:ring-4 focus-visible:outline-hidden hover:bg-ghost-hover focus-visible:ring-outline">
				<h6 class="my-2 text-content">Heading 6</h6>
			</button>

		</div>

	</div>

</ng-template>

<ng-template #blockquote_menu>

	<div class="gap-2 grid py-2 w-36 h-48 comp" cdkMenu>

		<div class="flex flex-col gap-2 p-2 overflow-y-auto prose scrollbar scrollbar-gutter-stable">

			<button class="border-form-element-text hover:bg-ghost-hover border-l-4 border-l-default rounded-sm focus-visible:ring-4 focus-visible:ring-outline focus-visible:outline-hidden" (click)="updateEditor(actions.addBlockquote(editor))" cdkMenuItem>
				Blockquote
			</button>

			<button class="border-primary hover:bg-ghost-hover border-l-4 border-l-primary rounded-sm focus-visible:ring-4 focus-visible:ring-outline focus-visible:outline-hidden" (click)="updateEditor(actions.addBlockquote(editor, 'note'))" cdkMenuItem>
				Note
			</button>

			<button class="border-success hover:bg-ghost-hover border-l-4 rounded-sm focus-visible:ring-4 focus-visible:ring-outline focus-visible:outline-hidden" (click)="updateEditor(actions.addBlockquote(editor, 'tip'))" cdkMenuItem>
				Tip
			</button>

			<button class="border-info hover:bg-ghost-hover border-l-4 rounded-sm focus-visible:ring-4 focus-visible:ring-outline focus-visible:outline-hidden" (click)="updateEditor(actions.addBlockquote(editor, 'important'))" cdkMenuItem>
				Important
			</button>

			<button class="border-warn hover:bg-ghost-hover border-l-4 rounded-sm focus-visible:ring-4 focus-visible:ring-outline focus-visible:outline-hidden" (click)="updateEditor(actions.addBlockquote(editor, 'warning'))" cdkMenuItem>
				Warning
			</button>

			<button class="border-error hover:bg-ghost-hover border-l-4 rounded-sm focus-visible:ring-4 focus-visible:ring-outline focus-visible:outline-hidden" (click)="updateEditor(actions.addBlockquote(editor, 'caution'))" cdkMenuItem>
				Caution
			</button>

		</div>

	</div>

</ng-template>

<ng-template #code_menu>

	<div class="gap-2 grid py-2 w-36 h-48 comp" cdkMenu>

		<div class="flex flex-col gap-2 p-2 overflow-y-auto prose scrollbar scrollbar-gutter-stable">

			<fieldset>
				<!-- INLINE CODE BUTTON -->
				<button class="flex items-center gap-1 hover:bg-ghost-hover p-2 rounded-sm focus-visible:ring-4 focus-visible:ring-outline focus-visible:outline-hidden w-full text-sm" (click)="updateEditor(actions.addInlineCode(editor))" cdkMenuItem>
					<svg wGlyph="code"></svg> Inline Code
				</button>
			</fieldset>

			<!-- todo: convert to for loop(?) -->
			<fieldset>
				<legend class="font-bold">Frequent</legend>

				<button class="flex items-center gap-1 hover:bg-ghost-hover p-2 rounded-sm focus-visible:ring-4 focus-visible:ring-outline focus-visible:outline-hidden w-full text-sm" (click)="updateEditor(actions.addCodeBlock(editor))" cdkMenuItem>
					<svg wGlyph="chevron_right"></svg> Empty Block
				</button>
				<button class="flex items-center gap-1 hover:bg-ghost-hover p-2 rounded-sm focus-visible:ring-4 focus-visible:ring-outline focus-visible:outline-hidden w-full text-sm" (click)="updateEditor(actions.addCodeBlock(editor, 'java'))" cdkMenuItem>
					<svg wGlyph="chevron_right"></svg> java
				</button>
				<button class="flex items-center gap-1 hover:bg-ghost-hover p-2 rounded-sm focus-visible:ring-4 focus-visible:ring-outline focus-visible:outline-hidden w-full text-sm" (click)="updateEditor(actions.addCodeBlock(editor, 'typescript'))" cdkMenuItem>
					<svg wGlyph="chevron_right"></svg> typescript
				</button>
				<button class="flex items-center gap-1 hover:bg-ghost-hover p-2 rounded-sm focus-visible:ring-4 focus-visible:ring-outline focus-visible:outline-hidden w-full text-sm" (click)="updateEditor(actions.addCodeBlock(editor, 'javascript'))" cdkMenuItem>
					<svg wGlyph="chevron_right"></svg> javascript
				</button>
				<button class="flex items-center gap-1 hover:bg-ghost-hover p-2 rounded-sm focus-visible:ring-4 focus-visible:ring-outline focus-visible:outline-hidden w-full text-sm" (click)="updateEditor(actions.addCodeBlock(editor, 'scss'))" cdkMenuItem>
					<svg wGlyph="chevron_right"></svg> scss
				</button>
				<button class="flex items-center gap-1 hover:bg-ghost-hover p-2 rounded-sm focus-visible:ring-4 focus-visible:ring-outline focus-visible:outline-hidden w-full text-sm" (click)="updateEditor(actions.addCodeBlock(editor, 'bash'))" cdkMenuItem>
					<svg wGlyph="chevron_right"></svg> bash
				</button>
				<button class="flex items-center gap-1 hover:bg-ghost-hover p-2 rounded-sm focus-visible:ring-4 focus-visible:ring-outline focus-visible:outline-hidden w-full text-sm" (click)="updateEditor(actions.addCodeBlock(editor, 'sql'))" cdkMenuItem>
					<svg wGlyph="chevron_right"></svg> sql
				</button>
				<button class="flex items-center gap-1 hover:bg-ghost-hover p-2 rounded-sm focus-visible:ring-4 focus-visible:ring-outline focus-visible:outline-hidden w-full text-sm" (click)="updateEditor(actions.addCodeBlock(editor, 'xml'))" cdkMenuItem>
					<svg wGlyph="chevron_right"></svg> xml
				</button>
				<button class="flex items-center gap-1 hover:bg-ghost-hover p-2 rounded-sm focus-visible:ring-4 focus-visible:ring-outline focus-visible:outline-hidden w-full text-sm" (click)="updateEditor(actions.addCodeBlock(editor, 'yaml'))" cdkMenuItem>
					<svg wGlyph="chevron_right"></svg> yaml
				</button>

			</fieldset>

			<fieldset>
				<legend class="font-bold">Other</legend>

				<button class="flex items-center gap-1 hover:bg-ghost-hover p-2 rounded-sm focus-visible:ring-4 focus-visible:ring-outline focus-visible:outline-hidden w-full text-sm" (click)="updateEditor(actions.addCodeBlock(editor, 'asciidoc'))" cdkMenuItem>
					<svg wGlyph="chevron_right"></svg> asciidoc
				</button>
				<button class="flex items-center gap-1 hover:bg-ghost-hover p-2 rounded-sm focus-visible:ring-4 focus-visible:ring-outline focus-visible:outline-hidden w-full text-sm" (click)="updateEditor(actions.addCodeBlock(editor, 'autohotkey'))" cdkMenuItem>
					<svg wGlyph="chevron_right"></svg> autohotkey
				</button>
				<button class="flex items-center gap-1 hover:bg-ghost-hover p-2 rounded-sm focus-visible:ring-4 focus-visible:ring-outline focus-visible:outline-hidden w-full text-sm" (click)="updateEditor(actions.addCodeBlock(editor, 'c'))" cdkMenuItem>
					<svg wGlyph="chevron_right"></svg> c
				</button>
				<button class="flex items-center gap-1 hover:bg-ghost-hover p-2 rounded-sm focus-visible:ring-4 focus-visible:ring-outline focus-visible:outline-hidden w-full text-sm" (click)="updateEditor(actions.addCodeBlock(editor, 'cpp'))" cdkMenuItem>
					<svg wGlyph="chevron_right"></svg> cpp
				</button>
				<button class="flex items-center gap-1 hover:bg-ghost-hover p-2 rounded-sm focus-visible:ring-4 focus-visible:ring-outline focus-visible:outline-hidden w-full text-sm" (click)="updateEditor(actions.addCodeBlock(editor, 'css'))" cdkMenuItem>
					<svg wGlyph="chevron_right"></svg> css
				</button>
				<button class="flex items-center gap-1 hover:bg-ghost-hover p-2 rounded-sm focus-visible:ring-4 focus-visible:ring-outline focus-visible:outline-hidden w-full text-sm" (click)="updateEditor(actions.addCodeBlock(editor, 'dockerfile'))" cdkMenuItem>
					<svg wGlyph="chevron_right"></svg> dockerfile
				</button>
				<button class="flex items-center gap-1 hover:bg-ghost-hover p-2 rounded-sm focus-visible:ring-4 focus-visible:ring-outline focus-visible:outline-hidden w-full text-sm" (click)="updateEditor(actions.addCodeBlock(editor, 'gradle'))" cdkMenuItem>
					<svg wGlyph="chevron_right"></svg> gradle
				</button>
				<button class="flex items-center gap-1 hover:bg-ghost-hover p-2 rounded-sm focus-visible:ring-4 focus-visible:ring-outline focus-visible:outline-hidden w-full text-sm" (click)="updateEditor(actions.addCodeBlock(editor, 'http'))" cdkMenuItem>
					<svg wGlyph="chevron_right"></svg> http
				</button>
				<button class="flex items-center gap-1 hover:bg-ghost-hover p-2 rounded-sm focus-visible:ring-4 focus-visible:ring-outline focus-visible:outline-hidden w-full text-sm" (click)="updateEditor(actions.addCodeBlock(editor, 'ini'))" cdkMenuItem>
					<svg wGlyph="chevron_right"></svg> ini
				</button>
				<button class="flex items-center gap-1 hover:bg-ghost-hover p-2 rounded-sm focus-visible:ring-4 focus-visible:ring-outline focus-visible:outline-hidden w-full text-sm" (click)="updateEditor(actions.addCodeBlock(editor, 'json'))" cdkMenuItem>
					<svg wGlyph="chevron_right"></svg> json
				</button>
				<button class="flex items-center gap-1 hover:bg-ghost-hover p-2 rounded-sm focus-visible:ring-4 focus-visible:ring-outline focus-visible:outline-hidden w-full text-sm" (click)="updateEditor(actions.addCodeBlock(editor, 'kotlin'))" cdkMenuItem>
					<svg wGlyph="chevron_right"></svg> kotlin
				</button>
				<button class="flex items-center gap-1 hover:bg-ghost-hover p-2 rounded-sm focus-visible:ring-4 focus-visible:ring-outline focus-visible:outline-hidden w-full text-sm" (click)="updateEditor(actions.addCodeBlock(editor, 'markdown'))" cdkMenuItem>
					<svg wGlyph="chevron_right"></svg> markdown
				</button>
				<button class="flex items-center gap-1 hover:bg-ghost-hover p-2 rounded-sm focus-visible:ring-4 focus-visible:ring-outline focus-visible:outline-hidden w-full text-sm" (click)="updateEditor(actions.addCodeBlock(editor, 'powershell'))" cdkMenuItem>
					<svg wGlyph="chevron_right"></svg> powershell
				</button>
				<button class="flex items-center gap-1 hover:bg-ghost-hover p-2 rounded-sm focus-visible:ring-4 focus-visible:ring-outline focus-visible:outline-hidden w-full text-sm" (click)="updateEditor(actions.addCodeBlock(editor, 'properties'))" cdkMenuItem>
					<svg wGlyph="chevron_right"></svg> properties
				</button>
				<button class="flex items-center gap-1 hover:bg-ghost-hover p-2 rounded-sm focus-visible:ring-4 focus-visible:ring-outline focus-visible:outline-hidden w-full text-sm" (click)="updateEditor(actions.addCodeBlock(editor, 'python'))" cdkMenuItem>
					<svg wGlyph="chevron_right"></svg> python
				</button>

			</fieldset>

		</div>

	</div>

</ng-template>

<!-- TEXTAREA -->
<div class="mt-2 group">

	<textarea
		#editor
		class="border-0 bg-transparent px-3 p-2 w-full text-content outline-0 peer scrollbar focus-visible:outline-hidden"
		[value]="value()"
		placeholder=""
		[readonly]="readonly()"
		[disabled]="disabled()"
		(focus)="hasFocus.set(true)"
		(blur)="hasFocus.set(false)"
		(input)="onInput(editor.value)"
		[rows]="rows()"></textarea>
		<label class="
			-top-3.5
			left-2
			absolute
			text-2xs
			leading-5
			px-1
			rounded
			bg-component-dark
			text-form-element-text

			peer-focus:-top-3.5
			peer-focus:text-2xs
			peer-focus:leading-5
			peer-focus:bg-component-dark
			peer-focus:text-form-element-text

			transition-all
			duration-500

			before:content-['*']
			before:text-focus
			before:mr-1
			">{{label()}}</label>
	<label class="
			flex
			justify-end
			gap-1
			p-2

			rounded-b-lg
			bg-form-element-border
			text-form-element-text
		">
		<span class="inline-flex items-center gap-1 text-3xs leading-5">
			<svg wGlyph="disk" class="text-[1.3em]"></svg>
			{{ undoCache.discSize() }}
			<svg wGlyph="memory" class="ml-2 text-[1.3em]"></svg>
			{{ undoCache.memSize() }}
		</span>
	</label>

</div>
