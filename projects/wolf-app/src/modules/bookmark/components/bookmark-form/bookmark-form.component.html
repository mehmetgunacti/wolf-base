<div bookmark-wrapper>

	<app-bookmark
		[item]="bookmark$ | async"
		[showDetails]="true"
		[disabled]="true"
		[popularButton]="false"
		[editable]="false"></app-bookmark>

</div>

<form>

	<div bookmark-form-left>

		<w-croppie
			[wControl]="form.image"
			wType="circle"
			wClass="primary"></w-croppie>

	</div>

	<div bookmark-form-right>

		<!-- ID -->
		<div *ngIf="bookmark?.id">
			<span class="p-float-label p-fluid">
				<input
					type="text"
					[value]="bookmark?.id"
					readonly>
				<label>ID</label>
			</span>
		</div>

		<!-- CREATED -->
		<!-- <div *ngIf="bookmark?.createTime">
			<span class="p-float-label p-fluid">
				<input
					type="text"
					[value]="bookmark?.createTime"
					readonly>
				<label>Created</label>
			</span>
		</div> -->

		<!-- URLs -->
		<div *ngFor="let fcUrl of form.urls.controls; let idx = index">
			<span class="input-container">
				<input
					type="text"
					[ngClass]="{ 'ng-invalid ng-dirty': fcUrl.invalid && fcUrl.dirty }"
					[formControl]="fcUrl"
					placeholder=""
					(input)="checkUrl($event)">
				<label>URL {{ form.urls.controls.length > 1 && idx === 0 ? '(Primary)' : '' }}</label>
			</span>
			<button *ngIf="idx === 0" type="button" class="icon-only" title="Add URL" (click)="addURL()"><span class="material-symbols-outlined">add</span></button>
			<button *ngIf="idx > 0" type="button" class="icon-only" title="Remove URL" (click)="removeURL(idx)"><span class="material-symbols-outlined">remove</span></button>
		</div>

		<!-- NAME -->
		<div>
			<span class="input-container">
				<input
					type="text"
					[ngClass]="{ 'ng-invalid ng-dirty': form.name.invalid && form.name.dirty }"
					[formControl]="form.name"
					placeholder="">
				<label>Name</label>
			</span>
			<button type="button" class="icon-only" title="Parse URL" (click)="nameFromURL()"><span class="material-symbols-outlined">move_down</span></button>
		</div>

		<!-- TITLE -->
		<div>
			<span class="input-container">
				<input
					type="text"
					[ngClass]="{ 'ng-invalid ng-dirty': form.title.invalid && form.title.dirty }"
					[formControl]="form.title"
					placeholder="">
				<label>Title</label>
			</span>
			<button type="button" class="icon-only" title="Lookup title" (click)="lookupTitle()"><span class="material-symbols-outlined">search</span></button>
		</div>

		<!-- TAGS -->
		<div>
			<span class="input-container">
				<w-tagbox [wControl]="form.tags"></w-tagbox>
				<!-- <input
					type="text"
					[ngClass]="{ 'ng-invalid ng-dirty': form.tags.invalid && form.tags.dirty }"
					[formControl]="form.tags"
					placeholder=""> -->
				<!-- <p-autoComplete
					#autocomplete
					[suggestions]="(tagSuggestions$ | async) || []"
					(completeMethod)="onTagInput($event)"
					[multiple]="true"
					[overlayOptions]="{ baseZIndex: 10000 }"
					appendTo="body">
				</p-autoComplete> -->
				<label>Tags</label>
			</span>
			<!-- <button pButton pRipple type="button" [icon]="isPopular ? 'pi pi-heart-fill' : 'pi pi-heart'" class="p-button-text" title="Toggle 'popular'" (click)="onTogglePopular()"></button> -->
		</div>

		<!-- CLICKS -->
		<div>
			<span class="input-container">
				<input
					type="number"
					[formControl]="form.clicks"
					placeholder="">
				<label>Clicks</label>
			</span>
		</div>

	</div>

</form>

<div form-element-buttons>
	<button type="button" class="danger" (click)="onDelete()">Delete</button>
	<button type="button" (click)="onSave()">Save</button>
</div>
